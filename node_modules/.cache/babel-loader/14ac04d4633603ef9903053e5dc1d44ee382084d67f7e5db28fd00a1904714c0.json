{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { toast } from 'bulma-toast';\nexport default {\n  name: 'LogInView',\n  data() {\n    return {\n      username: '',\n      password: '',\n      errors: []\n    };\n  },\n  mounted() {\n    document.title = 'ShipShop: Log In';\n  },\n  methods: {\n    async submitForm() {\n      console.log('form submission');\n      axios.defaults.headers.common['Authorization'] = '';\n      localStorage.removeItem('token');\n      const formData = {\n        username: this.username,\n        password: this.password\n      };\n      console.log('axios query');\n      await axios.post('/api/v1/token/login/', formData).then(response => {\n        const token = response.data.auth_token;\n        this.$store.commit('setToken', token);\n        axios.defaults.headers.common['Authorization'] = 'Token ' + token;\n        localStorage.setItem('token', token);\n        const toPath = this.$route.query.to || '/cart';\n        this.$router.push(toPath);\n      }).catch(error => {\n        if (error.response) {\n          for (const property in error.response.data) {\n            this.errors.push(`${property}: ${error.response.data[property]}`);\n          }\n          console.log(JSON.stringify(error.response.data));\n        } else if (error.message) {\n          this.error.push('Something went wrong . Please try again');\n          console.log(JSON.stringify(error));\n        }\n      });\n      console.log('axios query is done ');\n    }\n  }\n};","map":{"version":3,"names":["axios","toast","name","data","username","password","errors","mounted","document","title","methods","submitForm","console","log","defaults","headers","common","localStorage","removeItem","formData","post","then","response","token","auth_token","$store","commit","setItem","toPath","$route","query","to","$router","push","catch","error","property","JSON","stringify","message"],"sources":["/home/osboxes/0dir/shipshop/shipshop-ux/src/views/LogInView.vue"],"sourcesContent":["<template>\n    <div class=\"page-sign-up\">\n        <div class=\"columns\">\n            <div class=\"column is-4 is-offset-4\">\n                <h1 class=\"title\">Log In</h1>\n                <form @submit.prevent=\"submitForm\">\n                    \n                    <div class=\"field\">\n                        <label for=\"\">UserName</label>\n                        <div class=\"control\">\n                            <input type=\"text\" class=\"input\" v-model=\"username\" />\n\n                        </div>\n                    </div>\n                    <div class=\"fields\">\n                        <label>Password</label>\n                        <div class=\"control\">\n                            <input type=\"password\" class=\"input\" v-model=\"password\">\n                        </div>\n                    </div>\n\n                    <div class=\"notificatino is-danger\" v-if=\"errors.length\">\n                        <p \n                            v-for=\"error in errors\"\n                            v-bind:key=\"error\"\n                        >\n                            {{ error }}\n                        </p>\n                    </div>\n\n                    <div class=\"field\">\n                        <div class=\"control\">\n                            <button class=\"button is-dark mt-3\">Log In</button>\n                        </div>\n                    </div>\n\n                    <hr />\n                        <p class=\"bd-footer-tsp\">\n                            You don't have an account <router-link to=\"/sign-up\">Sign Up</router-link> \n                        </p>\n                         \n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\n    import axios from 'axios'\n    import { toast } from 'bulma-toast'\n\n\n    export default{\n        name:'LogInView',\n        data(){\n            return{\n                username:'',\n                password:'',\n                errors:[]\n            }\n        },\n        mounted(){\n            document.title='ShipShop: Log In'\n        },\n        methods:{\n            async submitForm(){\n                \n                console.log('form submission')\n                \n                axios.defaults.headers.common['Authorization']=''\n\n                localStorage.removeItem('token')\n\n                const formData={\n                    username:this.username,\n                    password:this.password\n                }\n\n                console.log('axios query')\n\n                await axios\n                    .post('/api/v1/token/login/',formData)\n                    .then(response=>{\n                        const token=response.data.auth_token\n\n                        this.$store.commit('setToken',token)\n\n                        axios.defaults.headers.common['Authorization']='Token '+token\n\n                        localStorage.setItem('token',token)\n\n                        const toPath=this.$route.query.to || '/cart'\n\n                        this.$router.push(toPath)\n                    })\n                    .catch(error=>{\n                        if(error.response){\n\n                            for(const property in error.response.data){\n                                this.errors.push(`${property}: ${error.response.data[property]}`)\n                            }\n\n                            console.log(JSON.stringify(error.response.data))\n                        }else if(error.message){\n                            this.error.push('Something went wrong . Please try again')\n\n                            console.log(JSON.stringify(error))\n                        }\n                    })\n\n                    console.log('axios query is done ')\n\n            }\n        }\n\n    }\n</script>"],"mappings":";AAiDI,OAAOA,KAAI,MAAO,OAAM;AACxB,SAASC,KAAI,QAAS,aAAY;AAGlC,eAAc;EACVC,IAAI,EAAC,WAAW;EAChBC,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,QAAQ,EAAC,EAAE;MACXC,QAAQ,EAAC,EAAE;MACXC,MAAM,EAAC;IACX;EACJ,CAAC;EACDC,OAAOA,CAAA,EAAE;IACLC,QAAQ,CAACC,KAAK,GAAC,kBAAiB;EACpC,CAAC;EACDC,OAAO,EAAC;IACJ,MAAMC,UAAUA,CAAA,EAAE;MAEdC,OAAO,CAACC,GAAG,CAAC,iBAAiB;MAE7Bb,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAC,EAAC;MAEhDC,YAAY,CAACC,UAAU,CAAC,OAAO;MAE/B,MAAMC,QAAQ,GAAC;QACXf,QAAQ,EAAC,IAAI,CAACA,QAAQ;QACtBC,QAAQ,EAAC,IAAI,CAACA;MAClB;MAEAO,OAAO,CAACC,GAAG,CAAC,aAAa;MAEzB,MAAMb,KAAI,CACLoB,IAAI,CAAC,sBAAsB,EAACD,QAAQ,EACpCE,IAAI,CAACC,QAAQ,IAAE;QACZ,MAAMC,KAAK,GAACD,QAAQ,CAACnB,IAAI,CAACqB,UAAS;QAEnC,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC,UAAU,EAACH,KAAK;QAEnCvB,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAC,QAAQ,GAACO,KAAI;QAE5DN,YAAY,CAACU,OAAO,CAAC,OAAO,EAACJ,KAAK;QAElC,MAAMK,MAAM,GAAC,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,EAAC,IAAK,OAAM;QAE3C,IAAI,CAACC,OAAO,CAACC,IAAI,CAACL,MAAM;MAC5B,CAAC,EACAM,KAAK,CAACC,KAAK,IAAE;QACV,IAAGA,KAAK,CAACb,QAAQ,EAAC;UAEd,KAAI,MAAMc,QAAO,IAAKD,KAAK,CAACb,QAAQ,CAACnB,IAAI,EAAC;YACtC,IAAI,CAACG,MAAM,CAAC2B,IAAI,CAAE,GAAEG,QAAS,KAAID,KAAK,CAACb,QAAQ,CAACnB,IAAI,CAACiC,QAAQ,CAAE,EAAC;UACpE;UAEAxB,OAAO,CAACC,GAAG,CAACwB,IAAI,CAACC,SAAS,CAACH,KAAK,CAACb,QAAQ,CAACnB,IAAI,CAAC;QACnD,CAAC,MAAK,IAAGgC,KAAK,CAACI,OAAO,EAAC;UACnB,IAAI,CAACJ,KAAK,CAACF,IAAI,CAAC,yCAAyC;UAEzDrB,OAAO,CAACC,GAAG,CAACwB,IAAI,CAACC,SAAS,CAACH,KAAK,CAAC;QACrC;MACJ,CAAC;MAEDvB,OAAO,CAACC,GAAG,CAAC,sBAAsB;IAE1C;EACJ;AAEJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}